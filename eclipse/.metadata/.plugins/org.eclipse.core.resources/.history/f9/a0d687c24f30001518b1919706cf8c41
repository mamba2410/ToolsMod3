package mamba2410.toolsmod3.util;

import mamba2410.toolsmod3.ToolsMod;
import net.minecraftforge.common.config.Configuration;
import net.minecraftforge.common.config.Property;
import cpw.mods.fml.common.FMLCommonHandler;
import cpw.mods.fml.common.event.FMLPreInitializationEvent;

public class ConfigHandler {
	
	public static ConfigHandler instance;
	public static ToolsMod modinstance;
	public static Configuration config;
	
	public static final String celestial_NAME = "Enable or disable the celestial section of the mod.";
	public static final String celestial_tools_NAME = "Enable or disable the celestial tools. (Requires celestial to be true)";
	public static final String enchant_repair_NAME = "Set the ID for the repair enchantment.";
	public static final String enchant_repair_rarity_NAME = "Set the rarity of the repair enchantment";
	
	public static boolean celestial = true;
	public static boolean celestial_tools = false;
	public static int repair_id = 156;
	public static int repair_rarity = 1;
	
	private static void syncConfig(){
		
		config.load();
		
		celestial = loadBoolean("item.celestial.enabled", celestial_NAME, celestial);
		celestial_tools = loadBoolean("item.tool.celestial.enabled", celestial_tools_NAME, celestial_tools);
		repair_id = loadInt("enchnt.repair.id", enchant_repair_NAME, repair_id);
		repair_rarity = loadInt("enchant.repair.rarity", enchant_repair_rarity_NAME, repair_rarity);
		
		if(config != null)
			config.save();
	}
	
	public static int loadInt(String name, String desc, int default_){
		Property prop = config.get(Configuration.CATEGORY_GENERAL, name, default_);
		prop.comment = desc;
		return prop.getInt(default_);
	}
	
	public static boolean loadBoolean(String name, String desc, boolean default_){
		Property prop = config.get(Configuration.CATEGORY_GENERAL, name, default_);
		prop.comment = desc;
		return prop.getBoolean(default_);
	}
	
	public void PreInit(FMLPreInitializationEvent e){
		config = new Configuration(e.getSuggestedConfigurationFile());
		syncConfig();
	}
	public void Init(){}
	public void PostInit(){}
	
	
	
	public ConfigHandler(ToolsMod mod){
		instance = this;
		modinstance = mod;
		FMLCommonHandler.instance().bus().register(modinstance);
	}

}
